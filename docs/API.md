## Functions

<dl>
<dt><a href="#joinMonster">joinMonster(astInfo, context, dbCall, [options])</a> ⇒ <code>Promise.&lt;Object&gt;</code></dt>
<dd><p>Takes the GraphQL AST and returns a nest Object with the data.</p>
</dd>
<dt><a href="#getNode">getNode(typeName, astInfo, context, where, dbCall, [options])</a> ⇒ <code>Promise.&lt;Object&gt;</code></dt>
<dd><p>A helper for resolving the Node type in Relay.</p>
</dd>
</dl>

## Typedefs

<dl>
<dt><a href="#dbCall">dbCall</a> ⇒ <code>Array</code> | <code>Promise.&lt;Array&gt;</code></dt>
<dd><p>User-defined function that sends a raw SQL query to the databse.</p>
</dd>
<dt><a href="#where">where</a> ⇒ <code>String</code></dt>
<dd><p>Function for generating a <code>WHERE</code> condition.</p>
</dd>
<dt><a href="#sqlJoin">sqlJoin</a> ⇒ <code>String</code></dt>
<dd><p>Function for generating a <code>JOIN</code> condition.</p>
</dd>
</dl>

<a name="joinMonster"></a>

## joinMonster(astInfo, context, dbCall, [options]) ⇒ <code>Promise.&lt;Object&gt;</code>
Takes the GraphQL AST and returns a nest Object with the data.

**Returns**: <code>Promise.&lt;Object&gt;</code> - The correctly nested data from the database.  

| Param | Type | Description |
| --- | --- | --- |
| astInfo | <code>Object</code> | Contains the parsed GraphQL query, schema definition, and more. Obtained from the fourth argument to the resolver. |
| context | <code>Object</code> | An arbitrary object that gets passed to the `where` function. Useful for contextual infomation that influeces the  `WHERE` condition, e.g. session, logged in user, localization. |
| dbCall | <code>[dbCall](#dbCall)</code> | A function that is passed the compiled SQL that calls the database and returns (a promise of) the data. |
| [options] | <code>Object</code> |  |
| options.minify | <code>Boolean</code> | Generate minimum-length column names in the results table. |
| options.dialect | <code>String</code> | The dialect of SQL your Database uses. Currently `'pg'` and `'standard'` are supported. |

<a name="getNode"></a>

## getNode(typeName, astInfo, context, where, dbCall, [options]) ⇒ <code>Promise.&lt;Object&gt;</code>
A helper for resolving the Node type in Relay.

**Returns**: <code>Promise.&lt;Object&gt;</code> - The correctly nested data from the database. The GraphQL Type is added to the "\_\_type\_\_" property, which is helpful for the `resolveType` function in the `nodeDefinitions` of **graphql-relay-js**.  

| Param | Type | Description |
| --- | --- | --- |
| typeName | <code>String</code> | The Name of the GraphQLObjectType |
| astInfo | <code>Object</code> | Contains the parsed GraphQL query, schema definition, and more. Obtained from the fourth argument to the resolver. |
| context | <code>Object</code> | An arbitrary object that gets passed to the where function. Useful for contextual infomation that influeces the  WHERE condition, e.g. session, logged in user, localization. |
| where | <code>[where](#where)</code> | A function that returns the WHERE condition. |
| dbCall | <code>function</code> | A function that is passed the compiled SQL that calls the database and returns (a promise of) the data. |
| [options] | <code>Object</code> | Same as `joinMonster` function's options. |

<a name="dbCall"></a>

## dbCall ⇒ <code>Array</code> &#124; <code>Promise.&lt;Array&gt;</code>
User-defined function that sends a raw SQL query to the databse.

**Returns**: <code>Array</code> &#124; <code>Promise.&lt;Array&gt;</code> - The raw data as a flat array of objects. Each object must represent a row from the result set.  

| Param | Type | Description |
| --- | --- | --- |
| sql | <code>String</code> | The SQL generated by `joinMonster` for the batch fetching. Use it to get the data from your database. |
| [done] | <code>function</code> | An error-first "done" callback. Only define this parameter if you don't want to return a `Promise`. |

<a name="where"></a>

## where ⇒ <code>String</code>
Function for generating a `WHERE` condition.

**Returns**: <code>String</code> - The condition for the `WHERE` clause.  

| Param | Type | Description |
| --- | --- | --- |
| tableAlias | <code>String</code> | The alias generated for this table. Already double-quoted. |
| args | <code>Object</code> | The GraphQL arguments for this field. |
| context | <code>Object</code> | An Object with arbitrary contextual information. |

<a name="sqlJoin"></a>

## sqlJoin ⇒ <code>String</code>
Function for generating a `JOIN` condition.

**Returns**: <code>String</code> - The condition for the `LEFT JOIN`.  

| Param | Type | Description |
| --- | --- | --- |
| parentTable | <code>String</code> | The alias generated for the parent's table. Already double-quoted. |
| childTable | <code>String</code> | The alias for the child's table. Already double-quoted. |

